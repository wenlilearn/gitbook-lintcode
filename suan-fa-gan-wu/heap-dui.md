# Heap\(堆\)

### Heap\(堆\):

* 分为两种, 最大堆和最小堆
* 基本上结构可以用二叉树来表示:

```text
最小堆示例
           1
         /    \
        2      3
       /
      4
```

* 值的特性:
  * 对于最大堆来说, 所有的parent都大于它的children
  * 对于最小堆来说, 所有的parent都小于它的children
* 操作:
  * insert: 在堆里面插入一个元素, O\(log\(n\)\)
  * remove: 删除堆中最大/最小的元素, O\(log\(n\)\)
  * peek: 查看堆中最大/最小的元素, O\(1\)
  * delete: 从堆中删除任何一个元素 O\(log\(n\)\)/O\(n\)
    * O\(log\(n\)\)需要一个hashmap作为辅助
* 具体的实现上, 数组可以代替二叉树作为堆得实现
  * 假设parent的index是i\(假设从0开始\)
  * 那么左边child的index是i \* 2 + 1, 右边儿子的是i \* 2 + 2
* 两种把一堆元素变成\(最小\)堆得方法:
  * siftup是把满足heap性质的元素都放到了前面去, 所以要处理剩下的没有被heapify的元素\(在后面\), 从前往后
  * siftdown是要把满足heap性质的元素都放到了后面去, 所以处理剩下的没有被heapify的元素\(在前面\), 要从后往前
  * siftup: 对于指定的元素, 寻找他的父亲\(\(i - 1\) / 2\)
    * 如果小于父亲, 就和父亲交换
    * 如果大于父亲, 那么就停止
  * siftdown: 对于指定元素, 寻找他的两个儿子\(i \* 2 + 1, i \* 2 + 2\)
    * 如果小于两个儿子, 那么就直接返回
    * 如果大于两个儿子中较小的那个, 那么就和较小的那个儿子交换, 然后继续siftdown

